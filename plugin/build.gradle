plugins {
    id 'java-library'
    //id 'maven'
    id 'java-gradle-plugin'
    id "com.gradle.plugin-publish" version "0.10.1"
}

repositories {
    mavenCentral()
//    maven {
//        url "https://dl.bintray.com/lucacampanella/mvn-release"
//    }
}

dependencies {

    implementation gradleApi()

    testImplementation group: 'commons-io', name: 'commons-io', version: '2.6'
    testImplementation("org.junit.jupiter:junit-jupiter:$junit5_version")
    testImplementation("org.assertj:assertj-core:$assertj_version")
    testRuntime("org.junit.jupiter:junit-jupiter-engine:$junit5_version")
    testImplementation project(":test-utils").sourceSets.test.output
}


gradlePlugin {
    plugins {
        cordaFlowsDocBuilder {
            id = 'com.github.lucacampanella.plugin.flows-doc-builder-plugin'
            displayName = 'corda flows doc builder plugin' // todo: change fro gradle 5
            description = 'Gradle plugin to automatically generate graph that represent Corda flows interactions'
            implementationClass = 'com.github.lucacampanella.plugin.FlowsDocBuilderPlugin'
        }
    }
}

pluginBundle {
    website = 'https://github.com/lucacampanella/corda-flows-doc-builder'
    vcsUrl = 'https://github.com/lucacampanella/corda-flows-doc-builder.git'
    tags = ['documentation', 'docs', 'corda', 'cordaledger', 'flow', 'graph']
}

jar {
    manifest {
        attributes 'Implementation-Title': 'Corda flows doc builder Gardle plugin',
                'Implementation-Version': version
    }
}


//uploadArchives {
//    repositories {
//        mavenDeployer {
//            repository(url: mavenLocal().url)
//            print(mavenLocal().url)
//        }
//    }
//}